@echo off

REM Developers can start Policy Agent directly from build directory by setting
REM POLICYAGENT_FS_JAVA=C:\path\to\dcg_security-policyagent\packages\policyagent\target\feature\java

REM SETLOCAL ENABLEEXTENSIONS
IF NOT DEFINED POLICYAGENT_PASSWORD ECHO MUST SET POLICYAGENT_PASSWORD && EXIT /B 1
IF NOT DEFINED POLICYAGENT_HOME SET POLICYAGENT_HOME=C:\policyagent
IF NOT DEFINED POLICYAGENT_FS_JAVA SET POLICYAGENT_FS_JAVA=%POLICYAGENT_HOME%\java
IF NOT DEFINED JVM_ARGS SET JVM_ARGS=-Xms128m -Xmx2048m -XX:MaxPermSize=128m -Dlogback.configurationFile=%POLICYAGENT_HOME%\configuration\logback.xml
REM ENDLOCAL

ECHO POLICYAGENT_HOME=%POLICYAGENT_HOME%
ECHO POLICYAGENT_FS_JAVA=%POLICYAGENT_FS_JAVA%
ECHO JVM_ARGS=%JVM_ARGS%

java %JVM_ARGS% -cp %POLICYAGENT_FS_JAVA%/* com.intel.mtwilson.launcher.console.Main %*
